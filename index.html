<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description"
      content="A code-based Chen ER diagram generator. Write text to generate Chen notation ER diagrams online. No drag-and-drop, free and open source." />
<meta name="google-site-verification" content="sgThf8gCfTN-fJIaLhY_0dcTRcwYE_8rnmvBj2APn3U" />
<title>Chen ER Diagram Generator</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<header>
    <h1>Chen ER Diagram Generator</h1>
</header>

<main>
    <div class="editor-preview-container">
        <section class="editor-section">
            <h2>DSL Input</h2>
            <textarea id="dslInput"></textarea>
            <button id="compileBtn">Compile</button>
            <button id="downloadBtn">Download SVG</button>
            <button id="downloadPngBtn">Download PNG</button>
        </section>

        <section class="preview-section">
            <h2>SVG Preview</h2>
            <div id="svgContainer">Your diagram will appear here...</div>
        </section>
    </div>

    <section class="help-section">
        <h2>Help / Syntax</h2>
        <pre id="helpText">
# ==============================
# Chen ER Diagram DSL - Syntax
# ==============================

# ------------------------------
# Configuration (colors)
# ------------------------------

#colors
entities: #AED6F1
weak_entities: #D6EAF8
relationships: #FFE4B5

# ------------------------------
# ENTITIES
# ------------------------------

entity EntityName
weak entity WeakEntityName

# Examples:
entity Student
weak entity Enrollment


# ------------------------------
# ATTRIBUTES
# ------------------------------

# Attributes can belong to:
# - an Entity
# - a Relationship
#
# The syntax is identical in both cases.

attribute OwnerName attributeName

# Key attribute (underlined)
attribute OwnerName attributeName PK

# Multivalued attribute (double oval)
attribute OwnerName attributeName MULTI

# Derived attribute (dashed oval)
attribute OwnerName attributeName DERIVED

# Examples:
attribute Student id PK
attribute Student phone MULTI
attribute Student age DERIVED


# ------------------------------
# COMPOSITE ATTRIBUTE
# ------------------------------

composite EntityName attributeName { sub1, sub2, sub3 }

# Example:
composite Student address { street, city, zip }


# ------------------------------
# RELATIONSHIPS
# ------------------------------

# Regular relationship
relationship RelationshipName

# Identifying relationship (double diamond)
identifying relationship RelationshipName

# Examples:
relationship Enrolls
identifying relationship HasEnrollment


# ------------------------------
# CARDINALITY & PARTICIPATION
# ------------------------------

RelationshipName EntityA (1|N|M) (TOTAL|PARTIAL) -- (1|N|M) (TOTAL|PARTIAL) EntityB

# TOTAL   = total participation (double line)
# PARTIAL = partial participation (single line)

# Examples:
Enrolls Student (1) TOTAL -- (N) PARTIAL Course
HasEnrollment Enrollment (1) TOTAL -- (1) TOTAL Student


# ------------------------------
# COMMENTS
# ------------------------------

# Any line starting with # is ignored


# ------------------------------
# COMPLETE EXAMPLE
# ------------------------------

entity Student
entity Course
weak entity Enrollment

attribute Student id PK
attribute Student phone MULTI
attribute Student age DERIVED

composite Student address { street, city, zip }

relationship Enrolls
identifying relationship HasEnrollment

Enrolls Student (1) TOTAL -- (N) PARTIAL Course
HasEnrollment Enrollment (1) TOTAL -- (1) TOTAL Student
        </pre>
    </section>

    <section class="credits">
        <p>Powered by <a href="https://graphviz.org/">Graphviz</a> (WASM)</p>
    </section>
</main>

<!-- Load Graphviz WASM via ES module -->
<script type="module">
  import { Graphviz } from "https://cdn.jsdelivr.net/npm/@hpcc-js/wasm-graphviz/dist/index.min.js";
  Graphviz.wasmFolder = "https://cdn.jsdelivr.net/npm/@hpcc-js/wasm-graphviz/dist/";
  window.GraphvizModule = Graphviz;
</script>
<script src="parser.js"></script>
<script src="https://cdn.jsdelivr.net/npm/svg-pan-zoom/dist/svg-pan-zoom.min.js"></script>
<script src="app.js"></script>
</body>
</html>
